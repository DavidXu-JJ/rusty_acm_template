[TOC]

<div STYLE="page-break-after: always;"></div>

# èƒŒåŒ…é—®é¢˜

## 01èƒŒåŒ…
>O(n*m)

```c++
#include<iostream>
#include<cstdio>
using namespace std;
int w[105],val[105];
int dp[105][1005];
int main()
{
    int t,m,res=-1;
    scanf("%d%d",&t,&m);
    for(int i=1;i<=m;i++)
    {
        scanf("%d%d",&w[i],&val[i]);
    }
    for(int i=1;i<=m;i++) 
        for(int j=t;j>=0;j--)  
        {
            if(j>=w[i])
            {
                dp[i][j]=max(dp[i-1][j-w[i]]+val[i],dp[i-1][j]);
            }  
            else
            {
                dp[i][j]=dp[i-1][j];
            }              
        }
    printf("%d",dp[m][t]);
    return 0;
}
```

>æ»šåŠ¨æ•°ç»„ä¼˜åŒ–

```c++
#include<iostream>
#include<cmath>
#include<cstdio>
#include<vector>
#include<algorithm>
#include<cstring>
using namespace std;
#define ll long long
const int maxn=1e4+10;
ll dp[maxn];		//dp[i][j]ä¸ºè®¨è®ºç‰©å“iæ—¶,å‰©ä½™å®¹é‡ä¸ºjæ—¶çš„æœ€å¤§ä»·å€¼
//ç”±äºç”±ä¸Šè€Œä¸‹æ›´æ–°ï¼Œå¯ä»¥å»æ‰ä¸€ç»´ç›´æ¥æ›´æ–°
ll tim[maxn],v[maxn];	//timç‰©å“å®¹é‡,vç‰©å“ä»·å€¼
int main()
{
    int t,m;
    cin>>t>>m;
    for(int i=1;i<=m;i++)
    {
        scanf("%lld%lld",&tim[i],&v[i]);
    }
    for(int i=1;i<=m;i++)
    {
        for(int j=t;j>=tim[i];j--)
        {
            dp[j]=max(dp[j-tim[i]]+v[i],dp[j]);
        }
    }
    cout<<dp[t];
}


```
<div STYLE="page-break-after: always;"></div>

## å®Œå…¨èƒŒåŒ…
>æœ‰æ—¶ä¼šå‡ºç°å½“é‡é‡å¤§äºç­‰äºhï¼Œå°äºç­‰äºhä¸ä»·æ ¼æœ€å¤§å€¼çš„å’Œæ—¶ï¼Œæœ€å°å€¼éƒ½æœ‰å¯èƒ½å‡ºç°ï¼Œä¸ä»…å­˜äºé‡é‡ç­‰äºhçš„æƒ…å†µï¼Œæ­¤æ—¶éœ€è¦æ‰©å¤§dpèŒƒå›´

```c++
#include<iostream>
#include<cstdio>
#define ll long long
using namespace std;
const int maxn=1e4+10;
int dp[maxn],p[maxn],t[maxn];
int main()
{
    int m,n;
    cin>>m>>n;
    for(int i=1;i<=n;i++)
    {
        cin>>p[i]>>t[i];
    }
    for(int i=1;i<=n;i++)
    {
        for(int j=0;j<=m-t[i];j++)
        {
            dp[j+t[i]]=max(dp[j+t[i]],dp[j]+p[i]);
        }
        //ä¸‹é¢çš„ä¹Ÿå¯ä»¥
//		for(int j=t[i];j<=m;j++)
//		{
//			dp[j]=max(dp[j],dp[j-t[i]]+p[i]);
//		}
    }
    cout<<dp[m];
}

```

<div STYLE="page-break-after: always;"></div>

## å¤šé‡èƒŒåŒ…
>å¤šé‡èƒŒåŒ…å¯ä»¥çœ‹ä½œç”±å¾ˆå¤šä¸ª01èƒŒåŒ…ç»„æˆ

[é¢˜ç›®é“¾æ¥æ´›è°·P1833](https://www.luogu.com.cn/problem/P1833)

```c++
#include<iostream>
#include<cstdio>
#include<fstream>
#define ll long long
using namespace std;
const int maxn=1e4+10;
int t[maxn],c[maxn],p[maxn];
int dp[maxn];
int main()
{
    int h1,m1,h2,m2,n;
    scanf("%d:%d %d:%d %d",&h1,&m1,&h2,&m2,&n);
    int w=(h2-h1-1)*60+(60+m2-m1);
    for(int i=1;i<=n;i++)
    {
        scanf("%d%d%d",&t[i],&c[i],&p[i]);
    }
    for(int i=1;i<=n;i++)
    {
        if(p[i]==0)
        {
            for(int j=0;j<=w-t[i];j++)
            {
                dp[j+t[i]]=max(dp[j+t[i]],dp[j]+c[i]);
            }
        }
        else{	//æ­¤å¤„æƒ…å†µä¸ºå¤šé‡èƒŒåŒ…ï¼Œæœ‰iå·ç‰©å“ç”±p[i]ä¸ª
            for(int k=0;k<p[i];k++)
            {
                for(int j=w;j>=t[i];j--)
                {
                    dp[j]=max(dp[j],dp[j-t[i]]+c[i]);
                }
            }
        }
    }
    cout<<dp[w];
}
```

>ä½†å½“ç‰©å“ç”±å¾ˆå¤šä¸ªæ—¶ï¼Œè¿™ç§æ–¹æ³•ä¼šå¾ˆæ…¢ï¼Œå› æ­¤éœ€è¦ä¼˜åŒ–

>ç¬¬ä¸€ç§ä¸ºäºŒè¿›åˆ¶ä¼˜åŒ–ï¼Œç¬¬äºŒç§ä¸ºå•è°ƒé˜Ÿåˆ—ä¼˜åŒ–

### äºŒè¿›åˆ¶ä¼˜åŒ–	

[è®²è§£é“¾æ¥](https://blog.csdn.net/weinierzui/article/details/23671419)

>å¤šé‡èƒŒåŒ…è½¬æ¢æˆ 01 èƒŒåŒ…é—®é¢˜å°±æ˜¯å¤šäº†ä¸ªåˆå§‹åŒ–ï¼ŒæŠŠå®ƒçš„ä»¶æ•°Cç”¨åˆ†è§£æˆè‹¥å¹²ä¸ªä»¶æ•°çš„é›†åˆï¼Œè¿™é‡Œé¢æ•°å­—å¯ä»¥ç»„åˆæˆä»»æ„å°äºç­‰äºCçš„ä»¶æ•°ï¼Œè€Œä¸”ä¸ä¼šé‡å¤ã€‚

>ä¹‹æ‰€ä»¥å«äºŒè¿›åˆ¶åˆ†è§£ï¼Œæ˜¯å› ä¸ºè¿™æ ·åˆ†è§£å¯ä»¥ç”¨æ•°å­—çš„äºŒè¿›åˆ¶å½¢å¼æ¥è§£é‡Šï¼Œæ¯”å¦‚ï¼š

>ï¼ˆ1ï¼‰7çš„äºŒè¿›åˆ¶ 7 = 111 å®ƒå¯ä»¥åˆ†è§£æˆ 001 ã€010 ã€100 è¿™ä¸‰ä¸ªæ•°å¯ä»¥ç»„åˆæˆä»»æ„å°äºç­‰äº7 çš„æ•°ï¼Œè€Œä¸”æ¯ç§ç»„åˆéƒ½ä¼šå¾—åˆ°ä¸åŒçš„æ•°

>ï¼ˆ2ï¼‰15 = 1111 å¯åˆ†è§£æˆ 0001 ã€ 0010 ã€ 0100 ã€ 1000 å››ä¸ªæ•°å­—

>ï¼ˆ3ï¼‰å¦‚æœ13 = 1101 åˆ™åˆ†è§£ä¸º 0001 0010 0100 0110å‰ä¸‰ä¸ªæ•°å­—å¯ä»¥ç»„åˆæˆ7ä»¥å†…ä»»æ„ä¸€ä¸ªæ•°ï¼Œ

>åŠ ä¸Š 0110 = 6 å¯ä»¥ç»„åˆæˆä»»æ„ä¸€ä¸ªå¤§äº6 å°äº13çš„æ•°ï¼Œè™½ç„¶æœ‰é‡å¤ä½†æ€»æ˜¯èƒ½æŠŠ 13 ä»¥å†…æ‰€æœ‰çš„æ•°éƒ½è€ƒè™‘åˆ°äº†ï¼ŒåŸºäºè¿™ç§æ€æƒ³å»æŠŠå¤šä»¶ç‰©å“è½¬æ¢ä¸ºï¼Œå¤šç§ä¸€ä»¶ç‰©å“ï¼Œå°±å¯ç”¨01 èƒŒåŒ…æ±‚è§£äº†ã€‚  

>æ³¨ï¼šè¯¥ä¾‹ä¸­0110å¯ä»¥13-1-2-4å¾—åˆ°ï¼Œå³1101-0001-0010-0100=0110=6

>è¯¥æ“ä½œèƒ½å¤ŸæŠŠkæ¬¡01èƒŒåŒ…è½¬åŒ–ä¸ºlogkæ¬¡01èƒŒåŒ…

```c++
#include<iostream>
#include<cstdio>
#include<fstream>
#define ll long long
using namespace std;
const int maxn=1e4+10;
int t[maxn],c[maxn],p[maxn];
int dp[maxn];
int binary[maxn];
int qpow(int n,int m)
{
    int res=1;
    int multi=n;
    while(m!=0)
        {
            if((m&1)==1)
                {
                    res*=multi;
                }
            multi=multi*multi;
            m/=2;
        }
    return res;
}
int main()
{
    int h1,m1,h2,m2,n;
    scanf("%d:%d %d:%d %d",&h1,&m1,&h2,&m2,&n);
    int w=(h2-h1-1)*60+(60+m2-m1);
    for(int i=1;i<=n;i++)
    {
        scanf("%d%d%d",&t[i],&c[i],&p[i]);	//tä¸ºç‰©å“å¤§å°ï¼Œcä¸ºç‰©å“ä»·å€¼ï¼Œpä¸ºç‰©å“ä¸ªæ•°
    }
    for(int i=1;i<=n;i++)
    {
        if(p[i]==0)
        {
            for(int j=0;j<=w-t[i];j++)
            {
                dp[j+t[i]]=max(dp[j+t[i]],dp[j]+c[i]);
            }
        }
        else{
            int cnt=0;
            int sav=p[i];
            while(sav!=0)	//è½¬æ¢ä¸ºäºŒè¿›åˆ¶
            {
                binary[cnt++]=sav%2;
                sav/=2;
            }
            int newt[maxn],newc[maxn];	//ç”Ÿæˆæ–°çš„å¤§ä»¶ç‰©å“
            //ä»¥1101ä¸ºä¾‹ï¼Œæ­¤å¤„å®ç°ç”Ÿæˆ0001ã€0010ã€0100ç‰©å“
            //cnt-1ä¸ºæœ€é«˜ä½
            for(int j=0;j<cnt-1;j++)
            {
                newt[j]=t[i]*(1<<j);		
                newc[j]=c[i]*(1<<j);
            }
            sav=p[i];
            for(int j=0;j<cnt-1;j++)	//æ­¤å¤„å¾—åˆ°1101-0001-0010-0100=0110
            {
                sav-=(1<<j);
            }
            newt[cnt-1]=t[i]*sav;		//ç”Ÿæˆ0110ä¸ªç‰©å“çš„åˆæˆç‰©å“
            newc[cnt-1]=c[i]*sav;
            for(int k=0;k<cnt;k++)
            {
                for(int j=w;j>=newt[k];j--)
                {
                    dp[j]=max(dp[j],dp[j-newt[k]]+newc[k]);
                }
            }
        }
    }
    cout<<dp[w];
}
```
å¦ä¸€ç‰ˆæœ¬ï¼š

```c++
for(int i=1;i<=n;i++)
{
	for(int j=1;j<=num[i];j<<=1)
    //äºŒè¿›åˆ¶æ¯ä¸€ä½æšä¸¾.
    //æ³¨æ„è¦ä»å°åˆ°å¤§æ‹†åˆ†
	{
		num[i]-=j;//å‡å»æ‹†åˆ†å‡ºæ¥çš„
		new_c[++tot]=j*c[i];//åˆæˆä¸€ä¸ªå¤§çš„ç‰©å“çš„ä½“ç§¯
		new_w[tot]=j*w[i];//åˆæˆä¸€ä¸ªå¤§çš„ç‰©å“çš„ä»·å€¼
	}
	if(num[i])//åˆ¤æ–­æ˜¯å¦ä¼šæœ‰ä½™ä¸‹çš„éƒ¨åˆ†.
    //å°±å¥½åƒæˆ‘ä»¬æŸä¸€ä»¶ç‰©å“ä¸º13,æ˜¾ç„¶æ‹†æˆäºŒè¿›åˆ¶ä¸º1,2,4.
    //æˆ‘ä»¬ä½™å‡ºæ¥çš„éƒ¨åˆ†ä¸º6,æ‰€ä»¥éœ€è¦å†æ¥ä¸€ä»½.
	{
		new_c[++tot]=num[i]*c[i];
		new_w[tot]=num[i]*w[i];
		num[i]=0;
	}
}
```



### å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–	

[é“¾æ¥](https://www.cnblogs.com/-guz/p/9866118.html)

>c[i]æ˜¯ä½“ç§¯ï¼Œw[i]æ˜¯ä»·å€¼ï¼Œjæ˜¯å½“å‰æ›´æ–°çš„å·²è£…ä½“ç§¯
>
>ä»¤d=c[i],a=j/c[i],b=j%c[i]ï¼Œå…¶ä¸­aä¸ºå…¨é€‰çŠ¶å†µä¸‹çš„ç‰©å“ä¸ªæ•°.åˆ™ğ‘—=ğ‘âˆ—ğ‘‘+ğ‘
>
>åˆ™å¸¦å…¥åŸå§‹çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸­ jâˆ’kâˆ—d = aâˆ—d+bâˆ’kâˆ—d = (aâˆ’k)âˆ—d+b
>
>æˆ‘ä»¬ä»¤(ğ‘âˆ’ğ‘˜)=ğ‘˜â€˜ï¼Œå†å›æƒ³æˆ‘ä»¬æœ€åŸå§‹çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸­ç¬¬äºŒçŠ¶æ€ : f\[i][jâˆ’kâˆ—c[i]]+kâˆ—w[i] ä»£è¡¨é€‰æ‹©kä¸ªå½“å‰iç‰©å“.
>
>j-k\*c[i] = (a-k)\*d+b = k'\*d+b
>
>è€Œæˆ‘ä»¬è¦æ±‚çš„çŠ¶æ€ä¹Ÿå°±å˜æˆäº†f\[i][j]=max(f\[iâˆ’1][kâ€²âˆ—d+b]+aâˆ—w[i]âˆ’kâ€²âˆ—w[i])
>
>è€Œå…¶ä¸­,æˆ‘ä»¬çš„aâˆ—w[i]ä¸ºä¸€ä¸ªå¸¸é‡(å› ä¸ºaå·²çŸ¥.)
>
>æ‰€ä»¥æˆ‘ä»¬çš„è¦æ±‚çš„çŠ¶æ€å°±å˜æˆäº†f\[i][j]=max(f\[iâˆ’1][kâ€²âˆ—d+b]âˆ’kâ€²âˆ—w[i])+aâˆ—w[i]
>
>æ ¹æ®æˆ‘ä»¬çš„kâˆˆ[1,lim]ï¼Œkâ€²âˆˆ[aâˆ’k,a]
>
>å½“å‰çš„f\[i][j]æ±‚è§£çš„å°±æ˜¯ä¸ºlim+1ä¸ªæ•°å¯¹åº”çš„f\[iâˆ’1][kâ€²âˆ—d+b]âˆ’kâ€²âˆ—w[i]çš„æœ€å¤§å€¼.
>
>(ä¹‹æ‰€ä»¥ä¸ºlim+1ä¸ªæ•°,æ˜¯åŒ…æ‹¬å½“å‰è¿™ä¸ªj,è¿˜æœ‰å‰é¢çš„ç‰©å“æ•°é‡.)
>
>å°†f\[i][j]å‰é¢æ‰€æœ‰çš„f\[iâˆ’1][kâ€²âˆ—d+b]âˆ’kâ€²âˆ—w[i]æ”¾å…¥ä¸€ä¸ªé˜Ÿåˆ—.
>
>é‚£æˆ‘ä»¬çš„é—®é¢˜å°±æ˜¯æ±‚è¿™ä¸ªæœ€é•¿ä¸ºlim+1çš„é˜Ÿåˆ—çš„æœ€å¤§å€¼+aâˆ—w[i].


```c++
#include<iostream>
#include<cstdio>
#include<fstream>
#define ll long long
using namespace std;
const int maxn=1e4+10;
int t[maxn],c[maxn],p[maxn];
int dp[maxn];
int main()
{
    int h1,m1,h2,m2,n;
    scanf("%d:%d %d:%d %d",&h1,&m1,&h2,&m2,&n);
    int w=(h2-h1-1)*60+(60+m2-m1);		//èƒŒåŒ…å®¹é‡
    for(int i=1;i<=n;i++)
    {
        scanf("%d%d%d",&t[i],&c[i],&p[i]);	//tä¸ºç‰©å“å¤§å°ï¼Œcä¸ºç‰©å“ä»·å€¼ï¼Œpä¸ºç‰©å“ä¸ªæ•°
        //ç‰©å“ä¸ªæ•°å¯ä»¥ç†è§£ä¸ºåç»­ç»´æŠ¤çš„å•è°ƒé˜Ÿåˆ—çš„é•¿åº¦
    }
    for(int i=1;i<=n;i++)
    {
        if(p[i]==0)
        {
            for(int j=0;j<=w-t[i];j++)
            {
                dp[j+t[i]]=max(dp[j+t[i]],dp[j]+c[i]);
            }
        }
        else{
			int q1[maxn],q2[maxn];	//q1è®°å½•ä¸‹æ ‡ï¼Œq2è®°å½•æ•°æ®
			for(int d=0;d<t[i];d++)	//æšä¸¾ä½™æ•°
			{
				int l=1,r=0,maxp=(w-d)/t[i];
				for(int P=0;P<=maxp;P++)
				{
					int &x=dp[d+t[i]*P];		//ç›¸å½“äºä¸Šæ–‡ä¸­å•æ¬¡å¾ªç¯çš„dp[m]
					while(l<=r && q1[l]<P-p[i]) l++;
					//ç»´æŠ¤åŒºé—´é•¿åº¦ï¼Œä¿è¯åŒºé—´é•¿åº¦å°äºç‰©å“ä¸ªæ•°
					while(l<=r && x-c[i]*P>=q2[r] ) r--;
					q1[++r]=P;
					q2[r]=x-c[i]*P;
					x=max(x,q2[l]+c[i]*P);
				}
			}
		}
	}
    cout<<dp[w];
}
```
### å˜å¼é¢˜	[é“¾æ¥](https://www.luogu.com.cn/problem/P5365)
æ­£åœ¨ä¸Šå¤§å­¦çš„å°çš®çƒçƒ­çˆ±è‹±é›„è”ç›Ÿè¿™æ¬¾æ¸¸æˆï¼Œè€Œä¸”æ‰“çš„å¾ˆèœï¼Œè¢«ç½‘å‹ä»¬æˆç§°ä¸ºã€Œå°å­¦ç”Ÿã€ã€‚

ç°åœ¨ï¼Œå°çš®çƒç»ˆäºå—ä¸äº†ç½‘å‹ä»¬çš„å˜²è®½ï¼Œå†³å®šå˜å¼ºäº†ï¼Œä»–å˜å¼ºçš„æ–¹æ³•å°±æ˜¯ï¼šä¹°çš®è‚¤ï¼

å°çš®çƒåªä¼šç© N ä¸ªè‹±é›„ï¼Œå› æ­¤ï¼Œä»–ä¹Ÿåªå‡†å¤‡ç»™è¿™Nä¸ªè‹±é›„ä¹°çš®è‚¤ï¼Œå¹¶ä¸”å†³å®šï¼Œä»¥ååªç©æœ‰çš®è‚¤çš„è‹±é›„ã€‚
è¿™Nä¸ªè‹±é›„ä¸­ï¼Œç¬¬ iä¸ªè‹±é›„æœ‰ Kiæ¬¾çš®è‚¤ï¼Œä»·æ ¼æ˜¯æ¯æ¬¾Ci Q å¸ï¼ˆåŒä¸€ä¸ªè‹±é›„çš„çš®è‚¤ä»·æ ¼ç›¸åŒï¼‰ã€‚

ä¸ºäº†è®©è‡ªå·±çœ‹èµ·æ¥é«˜å¤§ä¸Šä¸€äº›ï¼Œå°çš®çƒå†³å®šç»™åŒå­¦ä»¬å±•ç¤ºä¸€ä¸‹è‡ªå·±çš„çš®è‚¤ï¼Œå±•ç¤ºçš„æ€è·¯æ˜¯è¿™æ ·çš„ï¼šå¯¹äºæœ‰çš®è‚¤çš„æ¯ä¸€ä¸ªè‹±é›„ï¼Œéšä¾¿é€‰ä¸€ä¸ªçš®è‚¤ç»™åŒå­¦çœ‹ã€‚

æ¯”å¦‚ï¼Œå°çš®çƒå…±æœ‰ 5 ä¸ªè‹±é›„ï¼Œè¿™ 5 ä¸ªè‹±é›„åˆ†åˆ«æœ‰ 0,0,3,2,4 æ¬¾çš®è‚¤ï¼Œé‚£ä¹ˆï¼Œå°çš®çƒå°±æœ‰ 3Ã—2Ã—4=24 ç§å±•ç¤ºçš„ç­–ç•¥ã€‚
ç°åœ¨ï¼Œå°çš®çƒå¸Œæœ›è‡ªå·±çš„å±•ç¤ºç­–ç•¥èƒ½å¤Ÿè‡³å°‘è¾¾åˆ°Mç§ï¼Œè¯·é—®ï¼Œå°çš®çƒè‡³å°‘è¦èŠ±å¤šå°‘é’±å‘¢ï¼Ÿ

**è¾“å…¥æ ¼å¼**

ç¬¬ä¸€è¡Œï¼Œä¸¤ä¸ªæ•´æ•° N,Mã€‚

ç¬¬äºŒè¡Œï¼ŒNä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ¯ä¸ªè‹±é›„çš„çš®è‚¤æ•°é‡ Kiã€‚

ç¬¬ä¸‰è¡Œï¼ŒNä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ¯ä¸ªè‹±é›„çš®è‚¤çš„ä»·æ ¼ Ciã€‚

**è¾“å‡ºæ ¼å¼**

ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå°çš®çƒè¾¾åˆ°ç›®æ ‡æœ€å°‘çš„èŠ±è´¹ã€‚

```c++
#include<iostream>
#include<cstdio>
#include<fstream>
#define ll long long
using namespace std;
const int maxn=1e6+10;
ll dp[maxn];
ll k[maxn],c[maxn];
int main(){
	ll n,m;
	cin>>n>>m;
    ll qb=0;
	for(int i=1;i<=n;i++)
	{
		cin>>k[i];
	}
	for(int i=1;i<=n;i++)
	{
		cin>>c[i];
        qb+=c[i]*k[i];
	}
    dp[0]=1;
    for(int i=1;i<=n;i++){
        for(int w=qb;w>=0;w--){	//ä¸æ¨¡æ¿é¢˜ä¸åŒçš„æ˜¯ï¼Œå…ˆéå†å®¹é‡ï¼Œå†éå†ç‰©å“ä¸ªæ•°
            for(int j=0;j<=k[i];j++){
                if(w-j*c[i]>=0)
                dp[w]=max(dp[w],dp[w-j*c[i]]*j);
            }
        }
    }
    ll ans=0;
    while(ans<=qb&&dp[ans]<m) ans++;
    cout<<ans;
```

<div STYLE="page-break-after: always;"></div>

### å¯è¡Œæ€§å¤šé‡èƒŒåŒ…
**é¢˜ç›®æè¿°**

è®¾æœ‰1gã€2gã€3gã€5gã€10gã€20gçš„ç ç å„è‹¥å¹²æšï¼ˆå…¶æ€»é‡â‰¤1000ï¼‰

**è¾“å…¥æ–¹å¼ï¼š**
a1,a2,a3,a4,a5,a6ï¼ˆè¡¨ç¤º1gç ç æœ‰a1ä¸ªï¼Œ2gç ç æœ‰a 2	ä¸ªï¼Œâ€¦ï¼Œ20gç ç æœ‰a6ä¸ªï¼‰

**è¾“å‡ºæ–¹å¼ï¼š**
Total=Nï¼ˆNè¡¨ç¤ºç”¨è¿™äº›ç ç èƒ½ç§°å‡ºçš„ä¸åŒé‡é‡çš„ä¸ªæ•°ï¼Œä½†ä¸åŒ…æ‹¬ä¸€ä¸ªç ç ä¹Ÿä¸ç”¨çš„æƒ…å†µï¼‰

>æœªä¼˜åŒ–

```c++
#include <iostream>
#include<cstdio>
#include<string>
#include<vector>
#include<queue>
#include<cstring>
#include<cmath>
using namespace std;
const int maxn=1e3+10;
int dp[maxn];
int num[maxn];
int fama[]={0,1,2,3,5,10,20};
int main(){
	dp[0]=1;
	for(int i=1;i<=6;i++)
	{
		cin>>num[i];
		for(int j=1;j<=num[i];j++)
		{
			for(int k=1000;k>=fama[i];k--)	
			{
				dp[k]=dp[k]|dp[k-fama[i]];
			}
		}
	}		
	int ans=0;
	for(int i=1;i<=1000;i++){
		if(dp[i])	ans++;
	}
	cout<<"Total="<<ans;
}
```
>bitsetåŠ é€Ÿç‰ˆ

```c++
int table[16] = {0, 1, 1, 2, 1, 2, 2, 3, 1, 2, 2, 3, 2, 3, 3, 4};
int popcount(unsigned int x) { // è¿”å›xçš„äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°
    int ret = 0;
    for(int i = 0; i < 8; i++) ret += table[x & 15], x >>= 4;
    return ret;
}
æˆ–
int count_one(int x)//xçš„äºŒè¿›åˆ¶ä¸­ç¬¬0åˆ°n-1ä½ä¸­1çš„ä¸ªæ•°
{
    int cnt = 0;
    for(int i = 0; i <= n - 1; ++i)		//nä¸ºæœ€é«˜ä½
        if(x & (1 << i))//æ³¨æ„åšå®ŒæŒ‰ä½ä¸åçš„ç»“æœä¸æ˜¯1ï¼Œå¦‚å¯èƒ½ä¸º000010000ï¼Œæ‰€ä»¥ä¸è¦å†™æˆx & (1 << i) == 1
            cnt++;
    return cnt;
}
```

```c++
#include <iostream>
#include<cstdio>
#include<string>
#include<vector>
#include<queue>
#include<cstring>
#include<cmath>
#include<bitset>
using namespace std;
const int maxn=1e3+10;
bitset<maxn> dp;
int num[maxn];
int fama[]={0,1,2,3,5,10,20};
int main(){
	dp[0]=1;
	for(int i=1;i<=6;i++)
	{
		cin>>num[i];
		for(int j=1;j<=num[i];j++)
		{
				dp|=(dp<<fama[i]);	
				//bitsetå¯¹è±¡å·¦ç§»è¡¨ç¤ºä¸ºå…¨éƒ¨å·¦ç§»åŠ¨ï¼Œæ¯”å¦‚0011<<1ä¸º0110
		}
	}		
	int ans=0;
	for(int i=1;i<=1000;i++){
		if(dp[i])	ans++;
	}
	cout<<"Total="<<ans;
}
```

>äºŒè¿›åˆ¶ä¼˜åŒ–

```c++
#include <iostream>
#include<cstdio>
#include<string>
#include<vector>
#include<queue>
#include<cstring>
#include<cmath>
using namespace std;
const int maxn=1e3+10;
int dp[maxn];
int num[maxn];
int fama[]={0,1,2,3,5,10,20};

int qpow(int n,int m)
{
	int res=1;
	int multi=n;
	while(m!=0)
		{
			if((m&1)==1)
				{
					res*=multi;
				}
			multi=multi*multi;
			m/=2;
		}
	return res;
}
int main(){
	dp[0]=1;
	for(int i=1;i<=6;i++)
	{
		cin>>num[i];
		int cnt=0;
		int sav=num[i];
		int binary[maxn];
		while(sav!=0) 
		{
			binary[cnt++]=sav%2;
			sav/=2;
		}
		int newf[maxn];
		for(int j=0;j<cnt-1;j++)
			{
				newf[j]=fama[i]*qpow(2, j);
			}
		sav=num[i];
		for(int j=0;j<cnt-1;j++)  
		{
			sav-=qpow(2,j);
		}
		newf[cnt-1]=fama[i]*sav;  
		for(int k=0;k<cnt;k++)
			{
				for(int j=1000;j>=newf[k];j--)
					{
						dp[j]=dp[j]|dp[j-newf[k]];
					}
			}
	}		
	int ans=0;
	for(int i=1;i<=1000;i++){
		if(dp[i])	ans++;
	}
	cout<<"Total="<<ans;
}
```
>å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–

```c++
#include <iostream>
#include<cstdio>
#include<string>
#include<vector>
#include<queue>
#include<cstring>
#include<cmath>
using namespace std;
const int maxn=1e3+10;
int dp[maxn];
int num[maxn];
int fama[]={0,1,2,3,5,10,20};

int qpow(int n,int m)
{
	int res=1;
	int multi=n;
	while(m!=0)
		{
			if((m&1)==1)
				{
					res*=multi;
				}
			multi=multi*multi;
			m/=2;
		}
	return res;
}
int main(){
	dp[0]=1;
	for(int i=1;i<=6;i++)
	{
		cin>>num[i];
		dp[0]=1;
		int q1[maxn],q2[maxn];
		for(int d=0;d<fama[i];d++)	
		{
			int l=1,r=0,maxp=(1000-d)/fama[i];
			for(int P=0;P<=maxp;P++)
				{
					int &x=dp[d+fama[i]*P];
					while(l<=r && q1[l]<P-num[i]) l++;
					while(l<=r && x>=q2[r] ) r--;
					q1[++r]=P;
					q2[r]=x;
					x=x|q2[l];
				}
		}

	}		
	int ans=0;
	for(int i=1;i<=1000;i++){
		if(dp[i])	ans++;
	}
	cout<<"Total="<<ans;
}
```

<div STYLE="page-break-after: always;"></div>

## å¤šç»´èƒŒåŒ…

>ä¸€èˆ¬çš„å¤šç»´èƒŒåŒ…å°±æ˜¯é™åˆ¶æ¡ä»¶å¤šäº†ä¸€æ¡ï¼Œæ¯”å¦‚èƒŒåŒ…è£…ä¸œè¥¿ä¸ä»…æœ‰ä½“ç§¯é™åˆ¶ï¼Œåˆæœ‰é‡é‡é™åˆ¶ï¼Œè¿™ç§æ¨¡æ¿åªéœ€è¦åŠ ä¸€å±‚forå¾ªç¯é¢å¤–ä¾¿åˆ©é‡é‡å°±å¯ä»¥äº†ã€‚

ä¾‹å­ï¼š

```c++
for(int i=1;i<=n;i++)
{
	for(int j=M;j>=m[i];j--)
	{
		for(int k=T;k>=t[i];k--)
		{
			dp[j][k]=max(dp[j][k],dp[j-m[i]][k-t[i]]+1);
		}
	}
}
```

### å°å˜å¼

**é¢˜ç›®èƒŒæ™¯**

å°æ˜è¿‡ç”Ÿæ—¥çš„æ—¶å€™ï¼Œçˆ¸çˆ¸é€ç»™ä»–ä¸€å‰¯ä¹Œé¾Ÿæ£‹å½“ä½œç¤¼ç‰©ã€‚

**é¢˜ç›®æè¿°**

ä¹Œé¾Ÿæ£‹çš„æ£‹ç›˜æ˜¯ä¸€è¡ŒNä¸ªæ ¼å­ï¼Œæ¯ä¸ªæ ¼å­ä¸Šä¸€ä¸ªåˆ†æ•°ï¼ˆéè´Ÿæ•´æ•°ï¼‰ã€‚æ£‹ç›˜ç¬¬1æ ¼æ˜¯å”¯ä¸€çš„èµ·ç‚¹ï¼Œç¬¬Næ ¼æ˜¯ç»ˆç‚¹ï¼Œæ¸¸æˆè¦æ±‚ç©å®¶æ§åˆ¶ä¸€ä¸ªä¹Œé¾Ÿæ£‹å­ä»èµ·ç‚¹å‡ºå‘èµ°åˆ°ç»ˆç‚¹ã€‚

ä¹Œé¾Ÿæ£‹ä¸­Må¼ çˆ¬è¡Œå¡ç‰‡ï¼Œåˆ†æˆ4ç§ä¸åŒçš„ç±»å‹ï¼ˆMå¼ å¡ç‰‡ä¸­ä¸ä¸€å®šåŒ…å«æ‰€æœ‰4ç§ç±»å‹çš„å¡ç‰‡ï¼Œè§æ ·ä¾‹ï¼‰ï¼Œæ¯ç§ç±»å‹çš„å¡ç‰‡ä¸Šåˆ†åˆ«æ ‡æœ‰1,2,3,4å››ä¸ªæ•°å­—ä¹‹ä¸€ï¼Œè¡¨ç¤ºä½¿ç”¨è¿™ç§å¡ç‰‡åï¼Œä¹Œé¾Ÿæ£‹å­å°†å‘å‰çˆ¬è¡Œç›¸åº”çš„æ ¼å­æ•°ã€‚æ¸¸æˆä¸­ï¼Œç©å®¶æ¯æ¬¡éœ€è¦ä»æ‰€æœ‰çš„çˆ¬è¡Œå¡ç‰‡ä¸­é€‰æ‹©ä¸€å¼ ä¹‹å‰æ²¡æœ‰ä½¿ç”¨è¿‡çš„çˆ¬è¡Œå¡ç‰‡ï¼Œæ§åˆ¶ä¹Œé¾Ÿæ£‹å­å‰è¿›ç›¸åº”çš„æ ¼å­æ•°ï¼Œæ¯å¼ å¡ç‰‡åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚

æ¸¸æˆä¸­ï¼Œä¹Œé¾Ÿæ£‹å­è‡ªåŠ¨è·å¾—èµ·ç‚¹æ ¼å­çš„åˆ†æ•°ï¼Œå¹¶ä¸”åœ¨åç»­çš„çˆ¬è¡Œä¸­æ¯åˆ°è¾¾ä¸€ä¸ªæ ¼å­ï¼Œå°±å¾—åˆ°è¯¥æ ¼å­ç›¸åº”çš„åˆ†æ•°ã€‚ç©å®¶æœ€ç»ˆæ¸¸æˆå¾—åˆ†å°±æ˜¯ä¹Œé¾Ÿæ£‹å­ä»èµ·ç‚¹åˆ°ç»ˆç‚¹è¿‡ç¨‹ä¸­åˆ°è¿‡çš„æ‰€æœ‰æ ¼å­çš„åˆ†æ•°æ€»å’Œã€‚

å¾ˆæ˜æ˜¾ï¼Œç”¨ä¸åŒçš„çˆ¬è¡Œå¡ç‰‡ä½¿ç”¨é¡ºåºä¼šä½¿å¾—æœ€ç»ˆæ¸¸æˆçš„å¾—åˆ†ä¸åŒï¼Œå°æ˜æƒ³è¦æ‰¾åˆ°ä¸€ç§å¡ç‰‡ä½¿ç”¨é¡ºåºä½¿å¾—æœ€ç»ˆæ¸¸æˆå¾—åˆ†æœ€å¤šã€‚

ç°åœ¨ï¼Œå‘Šè¯‰ä½ æ£‹ç›˜ä¸Šæ¯ä¸ªæ ¼å­çš„åˆ†æ•°å’Œæ‰€æœ‰çš„çˆ¬è¡Œå¡ç‰‡ï¼Œä½ èƒ½å‘Šè¯‰å°æ˜ï¼Œä»–æœ€å¤šèƒ½å¾—åˆ°å¤šå°‘åˆ†å—ï¼Ÿ

**è¾“å…¥æ ¼å¼**

æ¯è¡Œä¸­ä¸¤ä¸ªæ•°ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚

ç¬¬1è¡Œ2ä¸ªæ­£æ•´æ•°N,Mï¼Œåˆ†åˆ«è¡¨ç¤ºæ£‹ç›˜æ ¼å­æ•°å’Œçˆ¬è¡Œå¡ç‰‡æ•°ã€‚

ç¬¬2è¡ŒNä¸ªéè´Ÿæ•´æ•°ï¼Œa1,a2,â€¦,aNï¼Œå…¶ä¸­aiè¡¨ç¤ºæ£‹ç›˜ç¬¬iä¸ªæ ¼å­ä¸Šçš„åˆ†æ•°ã€‚

ç¬¬3è¡ŒMä¸ªæ•´æ•°ï¼Œb1,b2,â€¦,bMï¼Œè¡¨ç¤ºMå¼ çˆ¬è¡Œå¡ç‰‡ä¸Šçš„æ•°å­—ã€‚

è¾“å…¥æ•°æ®ä¿è¯åˆ°è¾¾ç»ˆç‚¹æ—¶åˆšå¥½ç”¨å…‰Må¼ çˆ¬è¡Œå¡ç‰‡ã€‚

**è¾“å‡ºæ ¼å¼**

1ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå°æ˜æœ€å¤šèƒ½å¾—åˆ°çš„åˆ†æ•°ã€‚

```c++
#include<iostream>
#include<cstdio>
#include<fstream>
#include<algorithm>
#define ll long long
#define re register
using namespace std;
const int maxn=50;
inline int read()
{
    int x=0,f=1;char ch=getchar();
    while (!isdigit(ch)){if (ch=='-') f=-1;ch=getchar();}
        while (isdigit(ch)){x=x*10+ch-48;ch=getchar();}
        return x*f;
}
int dp[maxn][maxn][maxn][maxn];
int num[maxn];
int map[400];
int main()
{	
	int n=read(),m=read();
	for(int i=0;i<n;i++)
	{
		map[i]=read();
	}
	for(int i=1;i<=m;i++)
	{
		int card=read();
		num[card]++;
	}
	dp[0][0][0][0]=map[0];
	for(int i=0;i<=num[1];i++)
	{
		for(int j=0;j<=num[2];j++)
		{
			for(int k=0;k<=num[3];k++)
			{
				for(int x=0;x<=num[4];x++)
				{
				int pos=i+2*j+3*k+4*x;
		if(i!=0) dp[i][j][k][x]=max(dp[i][j][k][x],dp[i-1][j][k][x]+map[pos]);
		if(j!=0) dp[i][j][k][x]=max(dp[i][j][k][x],dp[i][j-1][k][x]+map[pos]);
		if(k!=0) dp[i][j][k][x]=max(dp[i][j][k][x],dp[i][j][k-1][x]+map[pos]);
		if(x!=0) dp[i][j][k][x]=max(dp[i][j][k][x],dp[i][j][k][x-1]+map[pos]);
		\\å…¶å®å°±æ˜¯åˆ†ç±»è®¨è®ºæœ€åä¸€å¼ æ‰“çš„æ˜¯ä»€ä¹ˆç‰Œ
				}
			}
		}
	}
	cout<<dp[num[1]][num[2]][num[3]][num[4]];
}
```

>å¤šç»´èƒŒåŒ…ä¸­ï¼Œç»´æ•°ä¸€èˆ¬è¡¨ç°ä¸ºæŸå‡ ç§å±æ€§çš„ä¸Šé™ï¼Œæˆ–æ˜¯æŸå‡ æ ·éœ€è¦æ»¡è¶³çš„éœ€æ±‚ã€‚

<div STYLE="page-break-after: always;"></div>

## æ··åˆèƒŒåŒ…
>æŒ‡ä¸€é“é¢˜ä¸­éœ€è¦ä½¿ç”¨å¤šä¸ªèƒŒåŒ…çš„æ¨¡å‹è·‘ï¼Œå°†å‰é¢çš„å„ç§èƒŒåŒ…çµæ´»è¿ç”¨ã€‚

## åˆ†ç»„èƒŒåŒ…
æ‰€è°“åˆ†ç»„èƒŒåŒ…ï¼Œå°±æ˜¯å°†ç‰©å“åˆ†ç»„ï¼Œæ¯ç»„çš„ç‰©å“ç›¸äº’å†²çªï¼Œæœ€å¤šåªèƒ½é€‰ä¸€ä¸ªç‰©å“æ”¾è¿›å»ã€‚

>ä¼ªä»£ç 

```c++
for æ‰€æœ‰çš„ç»„k
    for v=V..0
        for æ‰€æœ‰çš„iå±äºç»„k
ã€€ã€€ã€€ã€€ã€€ã€€f[v]=max{f[v],f[v-w[i]]+c[i]}
```
>æ³¨æ„è¿™é‡Œçš„ä¸‰å±‚å¾ªç¯çš„é¡ºåºï¼Œâ€œfor v=V..0â€è¿™ä¸€å±‚å¾ªç¯å¿…é¡»åœ¨â€œfor æ‰€æœ‰çš„iå±äºç»„kâ€ä¹‹å¤–ã€‚è¿™æ ·æ‰èƒ½ä¿è¯æ¯ä¸€ç»„å†…çš„ç‰©å“æœ€å¤šåªæœ‰ä¸€ä¸ªä¼šè¢«æ·»åŠ åˆ°èƒŒåŒ…ä¸­ã€‚

## æœ‰ä¾èµ–çš„èƒŒåŒ…
>æœ¬è´¨ä¸º01èƒŒåŒ…çš„å°å˜å¼ï¼Œæ ¹æ®é™„ä»¶é€‰æ‹©æƒ…å†µï¼Œåˆ†ç±»è·‘dpå°±è¡Œäº†ã€‚

**é¢˜ç›®æè¿°**

é‡‘æ˜ä»Šå¤©å¾ˆå¼€å¿ƒï¼Œå®¶é‡Œè´­ç½®çš„æ–°æˆ¿å°±è¦é¢†é’¥åŒ™äº†ï¼Œæ–°æˆ¿é‡Œæœ‰ä¸€é—´é‡‘æ˜è‡ªå·±ä¸“ç”¨çš„å¾ˆå®½æ•çš„æˆ¿é—´ã€‚æ›´è®©ä»–é«˜å…´çš„æ˜¯ï¼Œå¦ˆå¦ˆæ˜¨å¤©å¯¹ä»–è¯´ï¼šâ€œä½ çš„æˆ¿é—´éœ€è¦è´­ä¹°å“ªäº›ç‰©å“ï¼Œæ€ä¹ˆå¸ƒç½®ï¼Œä½ è¯´äº†ç®—ï¼Œåªè¦ä¸è¶…è¿‡ n å…ƒé’±å°±è¡Œâ€ã€‚ä»Šå¤©ä¸€æ—©ï¼Œé‡‘æ˜å°±å¼€å§‹åšé¢„ç®—äº†ï¼Œä»–æŠŠæƒ³ä¹°çš„ç‰©å“åˆ†ä¸ºä¸¤ç±»ï¼šä¸»ä»¶ä¸é™„ä»¶ï¼Œé™„ä»¶æ˜¯ä»å±äºæŸä¸ªä¸»ä»¶çš„ã€‚
å¦‚æœè¦ä¹°å½’ç±»ä¸ºé™„ä»¶çš„ç‰©å“ï¼Œå¿…é¡»å…ˆä¹°è¯¥é™„ä»¶æ‰€å±çš„ä¸»ä»¶ã€‚æ¯ä¸ªä¸»ä»¶å¯ä»¥æœ‰ 0 ä¸ªã€1 ä¸ªæˆ– 2 ä¸ªé™„ä»¶ã€‚æ¯ä¸ªé™„ä»¶å¯¹åº”ä¸€ä¸ªä¸»ä»¶ï¼Œé™„ä»¶ä¸å†æœ‰ä»å±äºè‡ªå·±çš„é™„ä»¶ã€‚é‡‘æ˜å…±æœ‰nå…ƒï¼Œæœ‰mä¸ªç‰©å“ï¼Œä¸‹mè¡Œåˆ†åˆ«æè¿°ï¼šä½¿ç”¨wå…ƒï¼Œé‡è¦åº¦ä¸ºvï¼Œå±äºiå·ä¸»ä»¶ï¼ˆå¦‚æœä¸º0ï¼Œåˆ™ä¸ºä¸»ä»¶ï¼‰ã€‚ä¸€ä¸ªç‰©å“çš„ä»·å€¼ä¸ºw*vï¼Œæ±‚èƒ½å¤Ÿè´­ä¹°è¾¾æˆçš„æœ€å¤§ä»·å€¼ã€‚

**è¾“å‡ºæ ¼å¼**

è¾“å‡ºä¸€è¡Œä¸€ä¸ªæ•´æ•°è¡¨ç¤ºç­”æ¡ˆã€‚

**æ€è·¯**
>è¿˜è®°å¾—01èƒŒåŒ…çš„å†³ç­–æ˜¯ä»€ä¹ˆå—ï¼Ÿ

>1.ä¸é€‰ï¼Œç„¶åå»è€ƒè™‘ä¸‹ä¸€ä¸ª

>2.é€‰ï¼ŒèƒŒåŒ…å®¹é‡å‡æ‰é‚£ä¸ªé‡é‡ï¼Œæ€»å€¼åŠ ä¸Šé‚£ä¸ªä»·å€¼ã€‚

>è¿™ä¸ªé¢˜çš„å†³ç­–æ˜¯äº”ä¸ªï¼Œåˆ†åˆ«æ˜¯ï¼š

>1.ä¸é€‰ï¼Œç„¶åå»è€ƒè™‘ä¸‹ä¸€ä¸ª

>2.é€‰ä¸”åªé€‰è¿™ä¸ªä¸»ä»¶

>3.é€‰è¿™ä¸ªä¸»ä»¶ï¼Œå¹¶ä¸”é€‰é™„ä»¶1

>4.é€‰è¿™ä¸ªä¸»ä»¶ï¼Œå¹¶ä¸”é€‰é™„ä»¶2

>5.é€‰è¿™ä¸ªä¸»ä»¶ï¼Œå¹¶ä¸”é€‰é™„ä»¶1å’Œé™„ä»¶2.

>è¿™äº”ä¸ªæƒ…å†µå…¨å¯¹dpå–ä¸€æ¬¡maxå°±è¡Œäº†

```c++
#include<iostream>
#include<cstdio>
#include<vector>
#include<algorithm>
using namespace std;
const int maxn=3e4+10;
int dp[maxn];
vector<int>	list[maxn];
inline int read()
{
	int x=0,f=1;char ch=getchar();
	while (!isdigit(ch)){if (ch=='-') f=-1;ch=getchar();}
	while (isdigit(ch)){x=x*10+ch-48;ch=getchar();}
	return x*f;
}
int v[maxn],w[maxn],affi[maxn];
int isnt_main[maxn];
int main(){
	int n=read(),m=read();
	n/=10;
	for(int i=1;i<=m;i++)
	{
		w[i]=read();
		w[i]/=10;
		v[i]=read();
		int add=read();
		if(add!=0)
		{
			isnt_main[i]=1;
			list[add].push_back(i);
		}
	}
	for(int i=1;i<=m;i++)
	{
		if(!isnt_main[i])
		for(int j=n;j>=w[i];j--)
		{
			int len=list[i].size();
			if(j>=w[i])
			dp[j]=max(dp[j],dp[j-w[i]]+v[i]*w[i]);
			if(len==1)
			{
				if(j>=w[i]+w[list[i][0]])	
					dp[j]=max(dp[j],dp[j-w[i]-w[list[i][0]]]
					+v[i]*w[i]+v[list[i][0]]*w[list[i][0]]);
			}
			if(len==2)
			{
				if(j>=w[i]+w[list[i][0]])	
					dp[j]=max(dp[j],dp[j-w[i]-w[list[i][0]]]
					+v[i]*w[i]+v[list[i][0]]*w[list[i][0]]);
				if(j>=w[i]+w[list[i][1]])	
					dp[j]=max(dp[j],dp[j-w[i]-w[list[i][1]]]
					+v[i]*w[i]+v[list[i][1]]*w[list[i][1]]);
				if(j>=w[i]+w[list[i][1]]+w[list[i][0]])	
					dp[j]=max(dp[j],dp[j-w[i]-w[list[i][1]]-w[list[i][0]]]
					+v[i]*w[i]+v[list[i][1]]*w[list[i][1]]
					+v[list[i][0]]*w[list[i][0]]);
			}
		}
	}
	cout<<dp[n]*10;
}
```

## æ³›åŒ–ç‰©å“çš„èƒŒåŒ…

è¿™ç§èƒŒåŒ…ï¼Œæ²¡æœ‰å›ºå®šçš„è´¹ç”¨å’Œä»·å€¼ï¼Œå®ƒçš„ä»·å€¼æ˜¯éšç€åˆ†é…ç»™å®ƒçš„è´¹ç”¨è€Œå®šã€‚åœ¨èƒŒåŒ…å®¹é‡ä¸ºVçš„èƒŒåŒ…é—®é¢˜ä¸­ï¼Œå½“åˆ†é…ç»™å®ƒçš„è´¹ç”¨ä¸ºviæ—¶ï¼Œèƒ½å¾—åˆ°çš„ä»·å€¼å°±æ˜¯h(vi)ã€‚è¿™æ—¶ï¼Œå°†å›ºå®šçš„ä»·å€¼æ¢æˆå‡½æ•°çš„å¼•ç”¨å³å¯ã€‚

<div STYLE="page-break-after: always;"></div>

## æ ‘ä¸Šåˆ†ç»„èƒŒåŒ…

>åˆ†ç»„èƒŒåŒ…çš„ä¼ªä»£ç å¦‚ä¸‹

```c++
for (int i = 0åˆ°ç»„æ•°)
	for (int j = max_våˆ°0)
		for (int k = æ­¤ç»„æ‰€æœ‰ç‰©å“)
			f[j] = max (f[j], f[j - v[k]] + w[k])
```
ç®€å•æ¥è¯´å°±æ˜¯æŠŠæ¯ä¸ªèŠ‚ç‚¹çœ‹æˆä¸€ä¸ªèƒŒåŒ…ï¼Œå®ƒçš„å®¹é‡å°±æ˜¯ä»¥è¿™ä¸ªèŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘å¤§å°ï¼Œç»„æ•°å°±æ˜¯è¿æ¥çš„å„¿å­ä¸ªæ•°ã€‚

æ¯ç»„éƒ½æœ‰å¾ˆå¤šé€‰æ‹©ï¼Œé€‰ä¸€ä¸ªï¼Œä¸¤ä¸ªï¼Œä¸‰ä¸ªç”¨æˆ·ï¼ŒæŠŠè¿™äº›é€‰æ‹©å½“åšç»„ä¸­çš„å…ƒç´ å°±å¥½äº†ï¼Œå®¹æ˜“çœ‹å‡ºæ¯ç»„ä¸­åªèƒ½é€‰ä¸€ä¸ªå…ƒç´ ï¼Œæ¯”å¦‚ä½ é€‰æ‹©äº†é€‰ä¸€ä¸ªç”¨æˆ·ï¼Œå°±ä¸å¯èƒ½åŒæ—¶é€‰æ‹©é€‰ä¸¤ä¸ªç”¨æˆ·ã€‚

>æ ‘ä¸Šåˆ†ç»„èƒŒåŒ…dfsæ¨¡æ¿

```c++
#include<iostream>
#include<algorithm>
#include<cstring>
#include<fstream>
#include<vector>
using namespace std;
const int maxn=3e3+10;
int dp[maxn][maxn];
int v[maxn];
vector<pair<int,int> > G[maxn];
int n,m;
inline int read()
{
	int x=0,f=1;char ch=getchar();
	while (!isdigit(ch)){if (ch=='-') f=-1;ch=getchar();}
	while (isdigit(ch)){x=x*10+ch-48;ch=getchar();}
	return x*f;
}
int dfs(int st)
{	
	if(st>n-m)
	{
		dp[st][1]=v[st];
		return 1;
	}
	int sum=1;
	int len=G[st].size();
	for(int i=0;i<len;i++)	//éå†å­æ ‘ï¼Œç›¸å½“äºéå†ç»„
	{
		int to=G[st][i].first;
		int cost=G[st][i].second;
		int num=dfs(to);
		sum+=num;		//æŠŠèŠ‚ç‚¹çœ‹æˆèƒŒåŒ…ï¼Œsumä¸ºè¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„æ ‘çš„èŠ‚ç‚¹æ€»æ•°ï¼Œä¸ºèƒŒåŒ…å®¹é‡ä¸Šé™
		for(int j=sum;j>=0;j--)
		{
			for(int t=0;t<=num;t++)	//éå†æ¯ä¸€ç§ç»„ä¸­é€‰å–çš„æ¯ä¸€ç§æƒ…å†µ
			{
				if(j>=t)
					dp[st][j]=max(dp[st][j],dp[st][j-t]+dp[to][t]-cost);
			}
		}
	}
	return sum;
}
int main(){
	n=read(),m=read();
	for(int i=0;i<=n;i++)
		for(int j=0;j<=n;j++)
			dp[i][j]=-9999999;
	int zhuan=n-m;
	for(int i=1;i<=zhuan;i++)
	{
		int size=read();
		for(int j=1;j<=size;j++)
			{
				int to=read(),cost=read();
				G[i].push_back(make_pair(to,cost));
			}
	}
	for(int i=zhuan+1;i<=n;i++)
		v[i]=read();
	for(int i=0;i<=n;i++)
	{
		dp[i][0]=0;
	}
	dfs(1);
	for(int i=n;i>=0;i--)
	{
		if(dp[1][i]>=0)
		{
			cout<<i;
			return 0;
		}
	}
}
```

<div STYLE="page-break-after: always;"></div>

## ä¸€äº›ç¥å¥‡çš„èƒŒåŒ…
### [ç ç ç§°é‡](https://www.luogu.com.cn/problem/P1441)
ç°æœ‰nä¸ªç ç ï¼Œé‡é‡åˆ†åˆ«ä¸º aiï¼Œåœ¨å»æ‰ m ä¸ªç ç åï¼Œé—®æœ€å¤šèƒ½ç§°é‡å‡ºå¤šå°‘ä¸åŒçš„é‡é‡ï¼ˆä¸åŒ…æ‹¬ 0ï¼‰ã€‚

è¯·æ³¨æ„ï¼Œç ç åªèƒ½æ”¾åœ¨å…¶ä¸­ä¸€è¾¹ã€‚

**è¾“å…¥æ ¼å¼**

ç¬¬ 1 è¡Œä¸ºæœ‰ä¸¤ä¸ªæ•´æ•° n å’Œmï¼Œç”¨ç©ºæ ¼åˆ†éš”ã€‚ï¼ˆn<=20,m<=4ï¼‰

ç¬¬ 2 è¡Œæœ‰ n ä¸ªæ­£æ•´æ•° a1 ,a2 a3,â€¦,anï¼Œè¡¨ç¤ºæ¯ä¸ªç ç çš„é‡é‡ã€‚

**è¾“å‡ºæ ¼å¼**

ä»…åŒ…æ‹¬ 1 ä¸ªæ•´æ•°ï¼Œä¸ºæœ€å¤šèƒ½ç§°é‡å‡ºçš„é‡é‡æ•°é‡ã€‚

>ç¬¬ä¸€ç§ï¼Œç”±äºn<=20ï¼Œå› æ­¤å¯ä»¥dfsæšä¸¾æ‰€æœ‰æƒ…å†µï¼Œå¯¹ç¬¦åˆæ¡ä»¶çš„è¿›è¡Œdpæ“ä½œ

```c++
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
const int maxn=22;
const int maxm=2010;
int n,m,a[maxn],ans,tot,ret;
bool tf[maxn],f[maxm];
void dp()//ä¸ä¼ å‚ï¼Œå…¨éƒ¨å®šä¹‰åœ¨å…¨å±€å˜é‡ä¸­ï¼Œå°±æ˜¯ä¸ª01èƒŒåŒ…
{
    memset(f,0,sizeof f);f[0]=true;ans=0;tot=0;//æ¸…é›¶ï¼Œå› ä¸ºå¯èƒ½è¦è°ƒç”¨å¤šæ¬¡
    for(int i=0;i<n;i++)//ä»å‰åˆ°åé€‰å–æ‰€æœ‰çš„ç ç 
    {
        if(tf[i])continue;//å¦‚æœè¢«æ ‡è®°ä¸ºå·²ç»èˆå¼ƒå°±è·³è¿‡
        for(int j=tot;j>=0;j--)if(f[j]&&!f[j+a[i]])f[j+a[i]]=true,ans++;
        //å¦åˆ™dpå¹¶ä¸”ç»´æŠ¤ansçš„å€¼
        tot+=a[i];//è¿™ä¸ªtotæ„ä¸ºå½“å‰f[i]ä¸ºçœŸå€¼çš„æœ€å¤§çš„iï¼Œæå¤§åŠ å¿«äº†dpè¿‡ç¨‹
    }
    ret=max(ans,ret);//æ›´æ–°æœ€åçš„ç­”æ¡ˆ
}
void dfs(int cur,int now)
//curä»£è¡¨å½“å‰å·²ç»é€‰å–/æ”¾å¼ƒäº†å¤šå°‘ä¸ªç ç ï¼Œnowä»£è¡¨å·²ç»æ”¾å¼ƒäº†å¤šå°‘ä¸ªç ç 
{
    if(now>m)return;//å¦‚æœå·²ç»æ”¾å¼ƒçš„ç ç æ•°è¶…è¿‡äº†éœ€è¦æ”¾å¼ƒçš„ç ç æ•°ï¼Œå‰ªæ
    if(cur==n){if(now==m)dp();return;}//å¦‚æœæœç´¢å®Œåæ­£å¥½ç¬¦åˆæ¡ä»¶ï¼Œæ‰§è¡Œä¸€æ¬¡dpè¿‡ç¨‹
    dfs(cur+1,now);//ä¸æ”¾å¼ƒå½“å‰çš„ç ç ï¼Œç»§ç»­å‘ä¸‹
    tf[cur]=true;//ç•™ä¸‹è¶³è¿¹
    dfs(cur+1,now+1);//æ”¾å¼ƒå½“å‰ç ç 
    tf[cur]=false; //æ“¦é™¤è¶³è¿¹
} 
int main()
{
    scanf("%d%d",&n,&m);
    for(int i=0;i<n;i++)scanf("%d",a+i);
    dfs(0,0);
    printf("%d\n",ret);
    return 0;
}
```
>bitsetç‰ˆçŠ¶å‹dp

```c++
#include <bitset>
#include <cstdio>
int w[25];
int table[16] = {0, 1, 1, 2, 1, 2, 2, 3, 1, 2, 2, 3, 2, 3, 3, 4};
int popcount(unsigned int x) { // è¿”å›xçš„äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°
    int ret = 0;
    for(int i = 0; i < 8; i++) ret += table[x & 15], x >>= 4;
    return ret;
}
int main() {
    int n, m, ans = 0;
    scanf("%d%d", &n, &m);
    for(int i = 0; i < n; i++) scanf("%d", w + i);
    for(int i = 0, li = 1 << n; i < li; i++) {
        if(popcount(i) == n - m) {	//ç¬¦åˆæ¡ä»¶
            std::bitset<2010> S;
            S[0] = 1;	
            for(int j = 0; j < n; j++) if(i & (1 << j)) S |= S << w[j];
            	//i & (1<<j)ä¸ºåˆ¤æ–­å¯¹äºå½“å‰æƒ…å†µiï¼Œæ˜¯å¦æœ‰é€‰ç¬¬jä¸ªèƒŒåŒ…ï¼Œå¦‚æœé€‰äº†å°±dpä¸€ä¸‹
            int siz = S.count();
            ans = ans > siz ? ans : siz;
        }
    }
    printf("%d\n", ans - 1);
    return 0;
}
```
